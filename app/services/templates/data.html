<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Beluga Sturgeon Financial</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1.00, minimum-scale=1.00, maximum-scale=2.00">
        <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/sidebar.css') }}">
        <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/base.css') }}">
        <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/suggestions.css') }}">
        <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/data/dataBase.css') }}">
        <link id="pageStyle" rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/data/light.css') }}">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.1/css/all.css. ">
        <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/loaderStyle.css') }}">
        <link rel="icon" href="{{ url_for('static',filename='images/ForesightLogoNoText.png') }}">
        <script src="https://kit.fontawesome.com/1b4a129057.js" crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.8/ScrollMagic.min.js" referrerpolicy="no-referrer"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.8/plugins/animation.gsap.min.js" integrity="sha512-5/OHwmQzDSBS0Ous4/hlYoWLHd06/d2r7LdKZQVBXOA6PvOqWVXtdboiLTU7lQTGyVoKVTNkwi0ol4gHGlw5ww==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.8/plugins/debug.addIndicators.min.js" integrity="sha512-RvUydNGlqYJapy0t4AH8hDv/It+zKsv4wOQGb+iOnEfa6NnF2fzjXgRy+FDjSpMfC3sjokNUzsfYZaZ8QAwIxg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="{{ url_for('static',filename='js/popupHandler.js') }}"></script>
        <script src="{{ url_for('static',filename='js/changeColor.js') }}"></script>
        <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/sideBarStyle.css') }}">
        <script src="https://cdn.anychart.com/releases/8.11.1/js/anychart-core.min.js"></script>
        <script src="https://cdn.anychart.com/releases/8.11.1/js/anychart-stock.min.js"></script>
        <script src="https://cdn.anychart.com/releases/8.11.1/js/anychart-data-adapter.min.js"></script>
        <script src="https://cdn.anychart.com/releases/8.11.1/js/anychart-ui.min.js"></script>
        <script src="https://cdn.anychart.com/releases/8.11.1/js/anychart-exports.min.js"></script>
        <script src="https://cdn.anychart.com/releases/8.11.1/js/anychart-cartesian.min.js"></script>
        <link href="https://cdn.anychart.com/releases/8.11.1/css/anychart-ui.min.css" type="text/css" rel="stylesheet">
        <link href="https://cdn.anychart.com/releases/8.11.1/fonts/css/anychart-font.min.css" type="text/css" rel="stylesheet">
        <script src="https://cdn.anychart.com/releases/8.11.1/js/anychart-annotations.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.3.1.min.js" 
                integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
                crossorigin="anonymous"></script>
        <script src="{{url_for('static', filename='js/jtoggler.js')}}"></script>
        <script src="{{url_for('static', filename='js/jtogglerThemeHandler.js')}}"></script>
        <link rel= "stylesheet" type= "text/css" href="{{url_for('static', filename='styles/jtoggler.css')}}"></link>
        <script>
            $(document).ready(() => {
                $('.jtoggler').jtoggler();
                $(document).on('jt:toggled', function(event, target) {
                    console.log(event, target);
                    console.info($(target).prop('checked'));
                });
                $(document).on('jt:toggled:multi', function(event, target) {
                    console.log(event, target);
                    console.info($(target).parent().index());
                    swapStyleSheet('{{info['dominantColor']}}', $(target).parent().index(), '{{url_for('account')}}');
                });

                if ('{{session['theme']}}' == 'dark') {
                    swapStyleSheet('{{info['dominantColor']}}', 2, '{{url_for('account')}}');
                    Array.from(document.getElementsByClassName('jtoggler-btn-wrapper')).forEach((e, i) => {
                        if (i === 2) {
                            e.click();
                        }
                    });
                } else if ('{{session['theme']}}' == 'blue'){
                    swapStyleSheet('{{info['dominantColor']}}', 1, '{{url_for('account')}}');
                    Array.from(document.getElementsByClassName('jtoggler-btn-wrapper')).forEach((e, i) => {
                        if (i === 1) {
                            e.click();
                        }
                    });
                } else {
                    swapStyleSheet('{{info['dominantColor']}}', 0, '{{url_for('account')}}');
                    Array.from(document.getElementsByClassName('jtoggler-btn-wrapper')).forEach((e, i) => {
                        if (i === 0) {
                            e.click();
                        }
                    });
                }
            });
        </script>
        {% if action %}
            <script src="{{ url_for('static', filename='js/sideBarHandler.js') }}"></script>
            <script src="{{ url_for('static', filename='js/sidebar.js') }}"></script>
            <script src="{{ url_for('static', filename='js/updatevalues.js') }}"></script>
        {% else %}
            <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/data/noData.css') }}">
        {% endif %}
    </head>
    <body class="preload" style="background:linear-gradient(157deg, #ffffff 0%, rgb{{info['dominantColor']}} 180%);">
        <style>
            ::-webkit-scrollbar {
                width: 7px;
                height: 7px;
            }
            
            /* Track */
            ::-webkit-scrollbar-track {
                background: #141414;
                border-radius: 10px;
            }
            
            /* Handle */
            ::-webkit-scrollbar-thumb {
                background: rgb{{info['dominantColor']}};
                border-radius: 10px;
                width: 20px;
            }
        </style>
        <div id="loader-wrapper">
            <div id="loading-bar-spinner" class="spinner">
                <div class="spinner-icon">
                </div>
            </div>
        </div>
        <script src="{{ url_for('static', filename='js/loader.js')}}"></script>
        <div class="header">
            <a href="/">
                <img class="logo" src="https://www.adaptivewfs.com/wp-content/uploads/2020/07/logo-placeholder-image.png" alt="belugaSturgeon">
            </a>

            <div class="searchbox">
                <form id="searchForm" onsubmit="handleSearchSubmit();">
                    <input type="search" name="searchedTicker" placeholder="ticker name" id="search" autocomplete="off">
                    <button type="submit" id="submit">Submit</button>
                </form>
                <div id="suggestions"></div>
            </div>

            <script>
                $("#searchForm").submit(function(e) {
                    e.preventDefault();
                });
            </script>
            <script src="{{url_for('static', filename='js/suggestions.js')}}"></script>

            <div class="NavBar">
                <a href="/apps" class="btn">Apps</a>
                <a href="/team" class="btn">Team</a>
                <a href="/about" class="btn">About</a>
                <a href="/#contact" class="btn">Contact</a>
                <a href="/premium">Premium</a>
                {% if session.user %}
                    <a href="/account" class="btn">{{session.user.name}}</a>
                {% else %}
                    <a href="/login" class="btn">Login</a>
                {% endif %}
            </div>
        </div>

          <script src="path/to/papaparse.min.js"></script>
          <body class="preload">
            <div class="container">
                <div class="mainVisual">
                    <div class="priceInfo">
                        <h2>${{info['currentValue']['value']}}</h2>
                        <p class="change" id="price_change">
                            {{info['currentValue']['change']}}
                        </p>
                        <p id="status">
                            {{info['marketStatus']}}
                        </p>
                    </div>
                </div>
                <div id="tab_bar">
                    <div class="tab selected_tab" onclick="openThePopup(possibleActions.CHARTS, this);">Charts</div>
                    <div class="tab" onclick="openThePopup(possibleActions.INCOME_STATEMENT, this);">Income</div>  
                    <div class="tab" onclick="openThePopup(possibleActions.BALANCE_SHEET, this);">Balance Sheet</div>   
                    <div class="tab" onclick="openThePopup(possibleActions.CASH_FLOW, this);">Cash Flow</div>       
                    <div class="tab" onclick="openThePopup(possibleActions.NEWS, this);">News</div>          
                </div>
                <div id="window">
                    <div id="charts">
                        <div class="sidegraph" id="state"></div>
                        <div class="sidegraph" id="actiongraph"></div>
                        <div class="sidegraph" id="reward"></div>
                        <div class="candle_graph" id="graph">
                            <h1 id="loadingText">Generating graph...</h1>
                        </div>
                    </div>
                    <div class="popup hidden" id="main_table">
                        <table id="table">
                            <tr>
                                <th class="label">(USD)</th>
                                <th>Value</th>
                                <th>Y/Y change</th>
                            </tr>
                        </table>
                    </div>
                    <div id="news" class="hidden">
                        <h3>Description</h3>
                        <div id="description">
                            <p class="companyDesc">
                                {{info['companyDesc']}}
                            </p>
                        </div>
                        <div id="news_list">
                            <h3>News</h3>
                            <div class="scrollable">
                                {% for a in newsList%}
                                <a href="{{a['url']}}" target="_blank">
                                        <div class="article">
                                            <img src="{{a['image']}}" alt="img">
                                            <p class="publisher">
                                                {{a["site"]}} {{a["publishedDate"]}}
                                            </p>
                                            <p class="title">
                                                {{a["title"]}}
                                            </p>
                                            <p>
                                                {{a["text"]}}
                                            </p>
                                        </div>
                                </a>
                                {%endfor%}
                            </div>
                        </div>
                    </div>
                </div>
            <script src="{{url_for('static', filename='js/stockChart.js')}}"></script>
                <div class="actionbox" id="actionbox">
                    {% if action %}
                        <p class="recommendedaction" id="action">
                            RECOMMENDED ACTION: <span class="action">{{action}}</span>
                        </p>
                        <p class="annualizedreturn">
                            Annualized Return: <span class="numbervalue">{{e_a_r}}</span>
                        </p>
                        <p class="stdreturn">
                            SD return: <span class="numbervalue">{{std}}</span>
                        </p>
                        <p class="recommendedaction">
                            Sharpe ratio: <span class="numbervalue">{{sharperatio}}</span>
                        </p>
                        <p class="recommendedaction">
                            Max drawdown: <span class="numbervalue">{{maxdrawdown}}</span>
                        </p>

                        <p class="model">gbm_quant BETA</p>
                    {% else %}
                    <div class="generate_action" id="generate_action">
                        <div id="c">
                            <p>Generate Action</p>
                            <svg width="91" height="91" viewBox="0 0 91 91" fill="none" style="transform: scale(0.6);" xmlns="http://www.w3.org/2000/svg" id="stars">
                                <path d="M29.0906 64.271C30.2359 65.0799 31.6044 65.5126 33.0065 65.5091C34.4086 65.5056 35.7749 65.0661 36.9161 64.2515C38.0731 63.4065 38.9505 62.2363 39.4315 60.8842L42.3368 51.9588C43.0824 49.7216 44.3378 47.6885 46.0038 46.0199C47.6699 44.3513 49.701 43.093 51.9368 42.3443L60.9778 39.419C62.3145 38.935 63.4656 38.0437 64.269 36.8707C65.0724 35.6977 65.4876 34.3021 65.456 32.8806C65.4244 31.4592 64.9477 30.0834 64.093 28.9473C63.2383 27.8111 62.0487 26.9718 60.6918 26.5477L51.7548 23.6354C49.5168 22.8906 47.4827 21.6354 45.8132 19.969C44.1437 18.3026 42.8846 16.2707 42.1353 14.0339L39.1975 5.01098C38.7245 3.68168 37.8489 2.5329 36.6927 1.72445C35.5364 0.916004 34.157 0.488095 32.7463 0.500252C31.3356 0.512409 29.9637 0.964028 28.8216 1.79228C27.6795 2.62053 26.8238 3.78424 26.3737 5.12149L23.4034 14.2224C22.6578 16.3993 21.428 18.3786 19.8069 20.0113C18.1857 21.644 16.2152 22.8876 14.0439 23.6484L5.00946 26.5542C3.68091 27.0283 2.53292 27.9044 1.72487 29.0608C0.916813 30.2172 0.48879 31.5965 0.500223 33.0073C0.511656 34.4181 0.961977 35.7903 1.78867 36.9335C2.61536 38.0766 3.7774 38.934 5.11346 39.3865L14.0439 42.2793C16.2933 43.0259 18.3361 44.29 20.0079 45.97C21.6798 47.6501 22.9341 49.6991 23.6699 51.9523L26.6077 60.9947C27.0757 62.3209 27.9467 63.465 29.0906 64.271ZM68.9788 90.5467C69.6437 91.0142 70.4082 91.3206 71.2118 91.4416C72.0155 91.5626 72.8363 91.495 73.6093 91.244C74.3823 90.993 75.0863 90.5656 75.6657 89.9955C76.245 89.4255 76.6838 88.7284 76.9474 87.9595L78.5593 83.006C78.9083 81.9795 79.4862 81.0459 80.2492 80.2757C81.0161 79.4956 81.9521 78.9235 82.979 78.5855L87.9967 76.9473C89.0322 76.5899 89.9283 75.9146 90.5573 75.0177C91.1863 74.1208 91.516 73.0481 91.4994 71.9527C91.4828 70.8573 91.1208 69.7951 90.465 68.9176C89.8091 68.0402 88.893 67.3923 87.8472 67.0663L82.8815 65.4412C81.8549 65.0972 80.9217 64.5204 80.155 63.7558C79.3882 62.9911 78.8087 62.0595 78.4618 61.0337L76.8239 56.0087C76.4722 54.9752 75.8042 54.0786 74.9145 53.4459C74.0249 52.8133 72.9588 52.4768 71.8672 52.4839C70.7757 52.4911 69.7141 52.8417 68.8329 53.486C67.9516 54.1303 67.2955 55.0356 66.9574 56.0737L65.352 61.0272C65.0203 62.0463 64.4575 62.9748 63.7078 63.7405C62.958 64.5062 62.0415 65.0882 61.0298 65.4412L56.0056 67.0793C54.9718 67.4298 54.0745 68.0967 53.4408 68.9856C52.8071 69.8745 52.4692 70.9404 52.4749 72.0321C52.4807 73.1238 52.8298 74.186 53.4728 75.0682C54.1158 75.9504 55.0201 76.6078 56.0576 76.9473L61.0168 78.553C62.0567 78.904 62.9927 79.4826 63.7596 80.2497C64.5331 81.0233 65.105 81.9594 65.4365 82.993L67.0809 88.0245C67.437 89.0416 68.1002 89.923 68.9788 90.5467Z" fill="white"/>
                            </svg>
                        </div>     
                        <div class="loading hidden">Building</div> 
                        <script src="{{url_for('static', filename='js/getAction.js')}}"></script>
                    </div>                    
                    {% endif %}
                </div>
                <script src="{{url_for('static', filename='js/gbm-drl-quant.js')}}"></script>
                <div class="nameAndLogo">
                    <img class="companyLogo" src="{{info['companyLogoUrl']}}" alt="{{info['companyName']}}">
                    <h1>{{info['companyName']}}</h1>
                </div>
                <!-- <div class="graph" id="graph">
                    <h1 id="loadingText">Generating graph...</h1>
                </div>
                <script src="{{url_for('static', filename='js/stockChart.js')}}"></script>
            </div> -->
            <!-- <div class="actionbox">
                <p class="recommendedaction">
                    RECOMMENDED ACTION: <span class="action">{{action}}</span>
                </p>
                <p class="annualizedreturn">
                    Annualized Return: <span class="numbervalue">{{e_a_r}}</span>
                </p>
                <p class="stdreturn">
                    SD return: <span class="numbervalue">{{std}}</span>
                </p>
                <p class="recommendedaction">
                    Sharpe ratio: <span class="numbervalue">{{sharperatio}}</span>
                </p>
                <p class="recommendedaction">
                    Max drawdown: <span class="numbervalue">{{maxdrawdown}}</span>
                </p>

                <p class="model">gbm_quant BETA</p>
            </div>
            <script src="{{url_for('static', filename='js/gbm-drl-quant.js')}}"></script>
            <div class="companyInfo">
                <div class="nameAndLogo">
                    <h1>{{info['companyName']}}</h1>
                    <img class="companyLogo" src="{{info['companyLogoUrl']}}" alt="{{info['companyName']}}">
                </div>
                <p class="companyDesc">
                    {{info['companyDesc']}}
                </p>
            </div>
        </div>
        <div class="cardLayout">
            <div class="cards">
                <div class="card" id="incomeStatement" onclick="openThePopup(possibleActions.INCOME_STATEMENT);">
                    <h3 class="cardTitle">
                        Income Statement
                    </h3>
                </div>
                <div class="card" id="balanceSheet" onclick="openThePopup(possibleActions.BALANCE_SHEET);">
                    <h3 class="cardTitle">
                        Balance Sheet
                    </h3>
                </div>
                <div class="card" id="cashFlow" onclick="openThePopup(possibleActions.CASH_FLOW);">
                    <h3 class="cardTitle">
                        Cash Flow
                    </h3>
                </div>
            </div>
            <div class="news">
                <h3>News</h3>
                <div class="scrollable">
                    {% for a in newsList["articles"]%}
                    <a href="{{a['link']}}">
                            <div class="article">
                                <p class="publisher">
                                    {{a["publisher"]}} {{a["date"]}}
                                </p>
                                <p class="title">
                                    {{a["title"]}}
                                </p>
                            </div>
                    </a>
                    {%endfor%}
                </div>
            </div>
        </div>
        <div class="background hidden" id="background">
        </div>
        <div class="popup hidden" id="popup">
            <div class="popupHead">
                <h3>
                    Title
                </h3>
                <div class="xContainer">
                    <i class="fa-solid fa-x X" onclick="closeThePopup()"></i>
                </div>
            </div>
            <table>
                <tr>
                    <th class="label">(USD)</th>
                    <th>Value</th>
                    <th>Y/Y change</th>
                </tr>
            </table> -->
        </div> 
    </div>
    <div id="theme_toggle">
        <label for="theme_switcher" style="size: 24px;" id="theme_label">Theme</label>
        <input id = "theme_switcher" type="checkbox" class="jtoggler" data-jtmulti-state="">
    </div>
        <footer>
            <div id="container">
                <div class="row">
                    <div class="col-sm3">
                        <h5>Get started</h5>
                        <ul>
                            <li>
                                <li><a href="/">Home</a></li>
                                <li><a href="/about">About</a></li>
                                <li><a href="/howItWorks">How it works</a></li>
                        </ul>
                    </div>
                    <div class="col-sm3">
                        <h5>Support</h5>
                        <ul>
                            <li>
                                <a href="https://resonancewebsite.herokuapp.com/#contact">Contact us</a>
                            </li>
                        </ul>  
                    </div>
                    <div class="col-sm3">
                        <h5>Legal</h5>
                        <ul>
                            <li>
                                <a href="/legal">Our policy</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="copyright">
                © 2022 <a href="https://resonancewebsite.herokuapp.com">Resonance</a>
            </div>
        </footer>
        <script>
            changeColor()
            changeTableStyle()
        </script>
    </body>
</html>